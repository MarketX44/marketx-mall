<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loader-ring { border: 4px solid #f3f3f3; border-top: 4px solid #1e40af; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-[#f8f9fb] pb-24">

    <div class="bg-blue-800 p-6 text-white rounded-b-[30px] shadow-lg">
        <p class="text-xs opacity-80">Available Balance</p>
        <h2 id="balance-display" class="text-3xl font-bold mb-4">$0.00</h2>
        <div class="flex justify-between text-xs bg-blue-900/50 p-3 rounded-xl">
            <div><p class="opacity-70">Pending Balance</p><p id="pending-display" class="font-bold">$0.00</p></div>
            <div><p class="opacity-70">VIP Level</p><p class="font-bold">Level 2 (15%)</p></div>
        </div>
    </div>

    <div class="p-4">
        <div class="bg-white p-6 rounded-2xl shadow-sm text-center border-2 border-dashed border-blue-200">
            <h3 class="font-bold text-gray-700">Get New Orders</h3>
            <p class="text-[10px] text-gray-400 mb-4">You need at least $10.00 to pick up orders</p>
            <button onclick="pickUpOrder()" class="bg-blue-700 text-white px-10 py-3 rounded-full font-bold shadow-md active:scale-95 transition-transform">
                Pick Up Now
            </button>
        </div>
    </div>

    <div class="px-4">
        <h3 class="font-bold text-sm text-gray-700 mb-3">Order History</h3>
        <div id="order-list" class="space-y-3">
            <p class="text-center text-gray-400 text-xs py-10">No active orders.</p>
        </div>
    </div>

    <div id="modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
        <div class="bg-white w-[85%] rounded-3xl p-8 text-center">
            <div id="loading-state">
                <div class="loader-ring mx-auto mb-4"></div>
                <p class="text-sm font-medium text-gray-600">Matching with customer...</p>
            </div>
            <div id="success-state" class="hidden">
                <div class="text-4xl mb-2">‚úÖ</div>
                <h4 class="font-bold text-lg">Order Picked!</h4>
                <p id="order-details" class="text-xs text-gray-500 my-4"></p>
                <button onclick="closeModal()" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">Confirm</button>
            </div>
        </div>
    </div>

    <nav class="fixed bottom-0 w-full bg-white border-t flex justify-around py-4">
        <a href="dashboard.html" class="text-gray-400 text-center">üè†<br><span class="text-[10px]">Home</span></a>
        <a href="commodity.html" class="text-gray-400 text-center">üì¶<br><span class="text-[10px]">Commodity</span></a>
        <a href="order.html" class="text-blue-700 text-center">üìã<br><span class="text-[10px]">Orders</span></a>
        <a href="account.html" class="text-gray-400 text-center">üë§<br><span class="text-[10px]">Account</span></a>
    </nav>

    <script>
        let balance = 0.00; // ·ÄÖ·Äô·Ä∫·Ä∏·Äû·Äï·Ä∫·Äõ·Äî·Ä∫ (·Äê·ÄÄ·Äö·Ä∫·Äê·Äô·Ä∫·Ä∏·Äê·ÄΩ·ÄÑ·Ä∫ Database ·Äô·Äæ ·Äú·Ä¨·Äô·Ää·Ä∫)
        let pending = 0.00;
        let vipRate = 0.15; // VIP Level 2 (15%)

        function pickUpOrder() {
            if (balance < 10) {
                alert("Insufficient Balance! Please recharge at least $10.00.");
                return;
            }

            document.getElementById('modal').style.display = 'flex';
            document.getElementById('loading-state').classList.remove('hidden');
            document.getElementById('success-state').classList.add('hidden');

            setTimeout(() => {
                const productPrice = (Math.random() * 100 + 20).toFixed(2);
                const merchantCost = (productPrice * (1 - vipRate)).toFixed(2);
                const profit = (productPrice - merchantCost).toFixed(2);

                document.getElementById('loading-state').classList.add('hidden');
                document.getElementById('success-state').classList.remove('hidden');
                document.getElementById('order-details').innerHTML = `
                    Product Value: $${productPrice}<br>
                    Your Cost: $${merchantCost}<br>
                    <span class="text-green-600 font-bold">Expected Profit: $${profit}</span>
                `;

                addOrderToList(productPrice, profit);
            }, 2000);
        }

        function addOrderToList(price, profit) {
            const list = document.getElementById('order-list');
            if(list.innerHTML.includes('No active orders')) list.innerHTML = '';
            
            const div = document.createElement('div');
            div.className = "bg-white p-4 rounded-xl shadow-sm border-l-4 border-orange-400 flex justify-between items-center";
            div.innerHTML = `
                <div>
                    <p class="text-[10px] text-gray-400 font-bold">ORDER #${Math.floor(Math.random()*10000)}</p>
                    <p class="text-sm font-bold">$${price}</p>
                </div>
                <div class="text-right">
                    <p class="text-[10px] text-green-600 font-bold">Profit: +$${profit}</p>
                    <span class="text-[10px] bg-orange-100 text-orange-600 px-2 py-0.5 rounded">Pending</span>
                </div>
            `;
            list.prepend(div);
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }
    </script>
</body>
</html>
